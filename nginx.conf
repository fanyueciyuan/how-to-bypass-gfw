#xxx.xxx换成自己的域名

#色中色反代SSL
server {
listen 80;
server_name sis.xxx.xxx;
rewrite ^(.*) https://sis.xxx.xxx$1 permanent;
}
server {
listen 443;
server_name sis.xxx.xxx;
ssl on;
ssl_certificate /etc/nginx/xxx.xxx.crt;#证书存放绝对路径位置
ssl_certificate_key /etc/nginx/xxx.xxx.key;
location / {
auth_basic "Restricted";#访问权限限制开启
auth_basic_user_file /pw/htpasswd;#用户名密码（密码可以不要）存放绝对路径，需要设置文件访问权限，否则错误500
proxy_cache cache_one;#开启缓存
proxy_cache_valid  200 304 3d; 
proxy_cache_key $host$uri$is_args$args;
proxy_set_header Host $host;
proxy_set_header Accept-Encoding "";
proxy_set_header X-Real-Ip $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto https; #$scheme;
add_header Front-End-Https on;
proxy_pass http://174.127.195.163/;
proxy_redirect  off;
proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
}
}




#MM公寓ssl

server {
listen 80;
server_name mm.xxx.xxx;
rewrite ^(.*) https://mm.xxx.xxx$1 permanent;
}
server {
listen 443;
server_name mm.xxx.xxx;
ssl on;
ssl_certificate /etc/nginx/xxx.xxx.crt;
ssl_certificate_key /etc/nginx/xxx.xxx.key;
location / {
auth_basic "Restricted";
auth_basic_user_file /pw/htpasswd;
proxy_cache cache_one;
proxy_cache_valid  200 304 3d; 
proxy_cache_key $host$uri$is_args$args;
proxy_set_header Host $host;
proxy_set_header Accept-Encoding "";
proxy_set_header X-Real-Ip $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto https; #$scheme;
add_header Front-End-Https on;
proxy_pass http://107.150.3.8/;
proxy_redirect  off;
proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
}
}





#18p2p SSL
server {
listen 80;
server_name 18.xxx.xxx;
rewrite ^(.*) https://18.xxx.xxx$1 permanent;
}
server {
listen 443;
server_name 18.xxx.xxx;
ssl on;
ssl_certificate /etc/nginx/xxx.xxx.crt;
ssl_certificate_key /etc/nginx/xxx.xxx.key;
location / {
auth_basic "Restricted";
auth_basic_user_file /pw/htpasswd;
proxy_cache cache_one;
proxy_cache_valid  200 304 3d; 
proxy_cache_key $host$uri$is_args$args;
proxy_set_header Host $host;
proxy_set_header Accept-Encoding "";
proxy_set_header X-Real-Ip $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto https; #$scheme;
add_header Front-End-Https on;
proxy_pass http://14.102.250.18/;
proxy_redirect  off;
proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
}
}






#草榴反代SSL

server {
listen 80;
server_name cl.xxx.xxx;
rewrite ^(.*) https://cl.xxx.xxx$1 permanent;
}
server {
listen 443;
server_name cl.xxx.xxx;
ssl on;
ssl_certificate /etc/nginx/xxx.xxx.crt;
ssl_certificate_key /etc/nginx/xxx.xxx.key;
location / {
auth_basic "Restricted";
auth_basic_user_file /pw/htpasswd;
proxy_cache cache_one;
proxy_cache_valid  200 304 3d; 
proxy_cache_key $host$uri$is_args$args;
proxy_set_header Host $host;
proxy_set_header Accept-Encoding "";
proxy_set_header X-Real-Ip $remote_addr;
proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
proxy_set_header X-Forwarded-Proto https;
add_header Front-End-Https on;
proxy_pass http://184.154.128.246/;
subs_filter_types text/css text/xml;
subs_filter http://173.236.54.236 https://cl.xxx.xxx/css;
sub_filter_once off;
proxy_redirect  off;
proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
}
location /css {
        proxy_pass http://173.236.54.236/;
        proxy_set_header Accept-Encoding "";
}
}




#谷歌反代SSL

server {
listen 80;
server_name gg.xxx.xxx;
rewrite ^(.*) https://gg.xxx.xxx$1 permanent;
}
server {
listen 443;
server_name gg.xxx.xxx;
ssl on;
ssl_certificate /etc/nginx/gg.xxx.xxx.crt;
ssl_certificate_key /etc/nginx/gg.xxx.xxx.key;
location / {
proxy_cache cache_one;
proxy_cache_valid  200 304 3d; 
proxy_cache_key $host$uri$is_args$args;
proxy_redirect http://www.google.com/ /;
proxy_cookie_domain google.com gg.xxx.xxx;
proxy_pass http://74.125.224.80/;
proxy_set_header Accept-Encoding "";
proxy_set_header User-Agent $http_user_agent;
proxy_set_header Accept-Language "zh-TW";
proxy_set_header Cookie "PREF=ID=047808f19f6de346:LD=zh-TW:NW=1";#台湾繁体免和谐，以及新页面打开
subs_filter_types text/css text/xml text/javascript;
sub_filter www.google.com gg.xxx.xxx;
subs_filter ssl.gstatic.com gg.xxx.xxx;
sub_filter_once off;
}
location /gb {
proxy_pass http://ssl.gstatic.com/gb/;
proxy_set_header Accept-Encoding "";
}
}







#非法域名访问直接返回403错误
server {
listen 80 default_server;
server_name _;
return 403;
}
server {
listen 443 default_server;
server_name _;
ssl on;
ssl_certificate /etc/nginx/xxx.xxx.crt;
ssl_certificate_key /etc/nginx/xxx.xxx.key;
return 403;
}
